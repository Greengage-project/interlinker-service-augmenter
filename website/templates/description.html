{% extends "template.html" %} {% block title %} Servicepedia {% endblock %} {%
block content %}

<script>
  function showAnnotationsCat(event) {
    if (event.type == "click") {
      event.preventDefault();
      var href = event.currentTarget.href;
      var category = event.currentTarget.textContent;
      window.location = "/description/" + category + "/" + href;
    }
  }

  function showAnnotationsDet(event) {
    if (event.type == "click") {
      event.preventDefault();
      var annotationId = event.currentTarget.getAttribute("value");
      window.location = "/subjectPage/" + annotationId;
    }
  }
</script>

<div class="container container-fluid" style="padding:10px;">
  <div class="row" style="align-items: center; word-break: break-all">
    <div class="col-10">
      <h4>{{description['title']|striptags}}</h4>
    </div>

    <div class="col-2"><a href="/website/modifica/{{ current_user.email }}/{{ description['url']}}"   class="btn bg-light border"  >PREVIEW</a></div>
    
    
  </div>
</div>
<hr />

<div class="container">
  <div class="row">
    <div class="hstack gap-3">

      {% if categoryLabel != 'feedback'%}
        <a class="bg-light border ms-auto" href="/description/{{description.id}}?category=feedback" >Feedback</a>
      {% else %}
        <a class="btn-secondary ms-auto active" href="/description/{{description.id}}?category=feedback" >Feedback</a>
      {% endif %}
      
      {% if categoryLabel != 'problem'%}
        <a class="bg-light border" href="/description/{{description.id}}?category=problem" >Problem</a>
      {% else %}
        <a class="btn-secondary active " href="/description/{{description.id}}?category=problem" >Problem</a>
      {% endif %}

      {% if categoryLabel != 'term'%}
        <a class="bg-light border " href="/description/{{description.id}}?category=term" >Term</a>
      {% else %}
        <a class="btn-secondary active " href="/description/{{description.id}}?category=term" >Term</a>
      {% endif %}


      {% if categoryLabel != 'question'%}
        <a class="bg-light border " href="/description/{{description.id}}?category=question" >Question</a>
      {% else %}
        <a class="btn-secondary active " href="/description/{{description.id}}?category=question" >Question</a>
      {% endif %}
      
      
      <div class="vr"></div>


      {% if categoryLabel != 'all'%}
        <a class="bg-light border " href="/description/{{description.id}}?category=all" >All</a>
      {% else %}
        <a class="btn-secondary active " href="/description/{{description.id}}?category=all" >All</a>
      {% endif %}


    </div>
  </div>

  
</div>

<hr />

<table class="table">
  <thead>
    <tr>
      {% if categoryLabel == 'all'%}
      <th scope="col-3">Category</th>
      {% endif %}
      <th scope="col-3">Description</th>
      <th scope="col-3">Creation Date</th>
      <th scope="col-3">Options</th>
    </tr>
  </thead>
  <tbody>
    {% for anotation in anotations %} {% if anotation.category != 'reply' %}
    <tr>
      {% if categoryLabel == 'all'%}
      <td>{{ anotation.category[0]|upper }}{{ anotation.category[1:] }}</td>
      {% endif %}
      <td>{{ anotation.text|striptags}} </td>
      <td>21/10/2021</td>
      <td>
        <a
          href="/subjectPage/{{ anotation.id }}"
          >...</a
        >
      </td>
    </tr>
    {% endif %} {% endfor %}
  </tbody>
</table>

{% endblock %}
