{% extends "template.html" %} {% block content %}


<script>


  

  function searchText(event) {  
    if(event.type=='click'){
      event.preventDefault();

      textoBox = document.getElementById("searchBox");
      texto=textoBox.value

      padministration = document.getElementById("padministration");
      padministrationSel=padministration.selectedOptions[0].label;

      if(padministration.selectedOptions[0].index==0){
        padministrationSel="";
      }

      domain = document.getElementById("domain");
      domainSel=domain.selectedOptions[0].label;
    
      
      if(domain.selectedOptions[0].index==0){
        domainSel="";
      }
  
      //window.location = '/website/?searchText=' + texto+'&padministration=' + padministrationSel+'&domain=' + domainSel;
      //recargarTabla();

      function addShow(data) {
      $('#result').text(data);
      alert(data);
      }

      $.ajax({
        method: 'POST',
        url: {{ url_for('store.descriptionsIndex')|tojson }},
        contentType: 'application/json;charset=UTF-8',
        data: JSON.stringify({"textoABuscar":texto,"padministration":padministrationSel,"domain":domainSel})
      }).done(addShow);
        
    }
  }


  
</script>

<hr />

<div class="container">
  <div class="row">
    <div
      class="col-4"
      style="display: flex; align-items: center; justify-content: center"
    >
      <img
        src="{{url_for('static', filename='logo_servicepedia_S.png')}}"
        style="max-width: 100%"
      />
    </div>

    <div
      class="col-8"
      style="display: flex; align-items: center; justify-content: center"
    >
      <p>
        The Servicepedia INTERLINKER is a component that optimizes the
        collaborative process of creating descriptions of public services and
        processes with the contribution of different stakeholders, representing
        different information goals and needs. It can be specifically designed
        to enforce the use of common models for service descriptions and
        standard classifications.
      </p>
    </div>
  </div>
</div>

<hr />

<div
  class="container"
  style="
    padding-top: 20px;
    align-items: center;
    justify-content: center;
    max-width: 80vh;
  "
>
  <div class="row">
    <form class="d-flex">
      <input
        id="searchBox"
        class="form-control me-2"
        type="search"
        placeholder="Search"
        aria-label="Search"
        onkeydown="searchText(event)"
      />
      <button class="btn btn-outline-secondary"  type="submit" onclick="searchText(event)" >Search</button>
      <button
        class="btn btn-outline-dark"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#advanseSearchTools"
        aria-expanded="false"
        aria-controls="collapseExample"
      >
        +
      </button>
    </form>
  </div>
</div>

<div class="collapse" id="advanseSearchTools">
  <hr />
  <div class="container">
    <div class="row">
      <div class="col-6" style="display: flex; align-content: center; justify-content: center">


      <select class="form-control" id="padministration">
        <option selected>Public Administration</option>
        {% for itemPA in publicsa %} 

        <option >{{ itemPA }}</option>
  
        {% endfor %}
        
      </select>

       
      </div>
      <div class="col-6" style="display: flex; align-content: center; justify-content: center">
        <select class="form-control cl-3" id="domain">
          <option selected>Domain</option>

          
          {% for itemUrl in urls %} 

          <option >{{ itemUrl }}</option>
    
          {% endfor %}
        </select>
     </div>

    </div>
  </div>
</div>

<hr />
<div class="container">
  <div class="row">
    <div
      class="col"
      style="align-content: center; justify-content: center; display: flex"
    >
      <h4>The most recent public service descriptions discussed</h4>
    </div>
  </div>
  <hr />

 <div id="result">
 
 </div>

  <div class="row">
    <div class="table-responsive">
    <table class="table" style="height: auto">
      <thead>
        <tr>
          <th scope="col-3">Public Service Administration</th>
          <th scope="col-3">Title</th>
          <th scope="col-3">Creation Date</th>
          <th scope="col-3">Options</th>
        </tr>
      </thead>
      <tbody>
       
        {% for description in descriptions %} 
  
            <tr>
              <td>{{ description.padministration }}</td>
              <td>{{ description.title }}</td>
              <td>{{ description.created }}</td>
              <td>


                <i class="bi bi-box-arrow-in-right " style="width:100px;"></i>

                
              </td>
            </tr>

        {% endfor %}
      </tbody>
    </table>
  </div>

    <div
      class="container"
      style="align-content: center; justify-content: center; display: flex"
    >
      <div class="row">
        <div class="col">
          <nav aria-label="...">
            <ul class="pagination">
              <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true"
                  >Previous</a
                >
              </li>
              <li class="page-item"><a class="page-link" href="#">1</a></li>
              <li class="page-item active" aria-current="page">
                <a class="page-link" href="#">2</a>
              </li>
              <li class="page-item"><a class="page-link" href="#">4</a></li>
              <li class="page-item">
                <a class="page-link" href="#">Next</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>
<hr />

{% endblock content %}
